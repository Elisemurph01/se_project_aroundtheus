!function(){"use strict";class e{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector))}_showInputError=e=>{const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)};_hideInputError=e=>{const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""};_checkInputValidity=e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e)};_toggleButtonState=()=>{this._hasInvalidInput()?this.disableButton():this._enableButton()};_enableButton=()=>{this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1};disableButton=()=>{this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0};_hasInvalidInput=()=>this._inputList.some((e=>!e.validity.valid));resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}_setEventListeners(){this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(e)}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetForm(){this._formElement.reset()}}class t{constructor(e,t,s){let{name:n,link:i}=e;this.name=n,this.link=i,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._trashButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this)}))}_handleLikeIcon(){this._likeButton.classList.toggle("cards__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_getView(){return document.querySelector(this._cardSelector).content.querySelector(".list").cloneNode(!0)}generateCard(){return this._cardElement=this._getView(),this._likeButton=this._cardElement.querySelector(".cards__like-button"),this._trashButton=this._cardElement.querySelector(".cards__trash-button"),this._cardImageEl=this._cardElement.querySelector(".cards__image"),this._cardTitleEl=this._cardElement.querySelector(".cards__title"),this._cardTitleEl.textContent=this.name,this._cardImageEl.setAttribute("src",this.link),this._cardImageEl.setAttribute("alt",this.name),this._setEventListeners(),this._cardElement}}class s{constructor(e){let{modalSelector:t}=e;this._modalElement=document.querySelector(t)}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close=()=>{this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)};_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._closeButton=this._modalElement.querySelector(".modal__close"),this._closeButton.addEventListener("click",this.close),this._modalElement.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()}))}}class n extends s{constructor(e,t,s){let{formSelector:n,submitButtonSelector:i}=s;super({modalSelector:e}),this._modalForm=this._modalElement.querySelector(n),this._handleFormSubmit=t,this._inputList=[...this._modalForm.querySelectorAll(".modal__form-input")],this._button=this._modalElement.querySelector(i)}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._modalForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)})),super.setEventListeners()}}const i=document.querySelector("#profile-edit-button"),r=document.querySelector("#profile-edit-modal").querySelector(".modal__form"),o=document.querySelector("#profile-add-button"),a=document.querySelector("#add-card-form"),l=(new class{}(options),{formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__form-input_error",errorClass:"modal__error_visible"}),c=new e(l,r);c.enableValidation();const d=new e(l,a);d.enableValidation();const m=new n("#add-card-modal",(function(e){m.close(),u.addItem({name:e.title,link:e.url}),a.reset(),d.disableButton()}),l),u=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}rendererItems=()=>{this._items.reverse().forEach((e=>{this.addItem(e)}))};addItem=e=>{const t=this._renderer(e);this._container.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg "}],renderer:function(e){return new t(e,"#card-template",E).generateCard()}},".cards__list"),_=new n("#profile-edit-modal",(function(e){p.setUserInfo(e),_.close()}),l),h=new class extends s{constructor(e){super({modalSelector:e}),this._previewImage=this._modalElement.querySelector(".modal__image"),this._previewImageTitle=this._modalElement.querySelector(".modal__image-title")}open(e){let{name:t,link:s}=e;this._previewImage.setAttribute("src",s),this._previewImage.setAttribute("alt",t),this._previewImageTitle.textContent=t,super.open()}}("#preview__image-modal"),p=new class{constructor(e){let{nameSelector:t,descriptionSelector:s}=e;this._nameElement=document.querySelector(t),this._descriptionElement=document.querySelector(s)}getUserInfo(){const e={};return e.title=this._nameElement.textContent,e.description=this._descriptionElement.textContent,e}setUserInfo(e){this._nameElement.textContent=e.title,this._descriptionElement.textContent=e.description}}({nameSelector:".profile__title",descriptionSelector:".profile__description"});function E(e){h.open(e)}i.addEventListener("click",(()=>{_.open();const e=p.getUserInfo();_.setInputValues(e),c.resetValidation()})),o.addEventListener("click",(()=>{m.open()})),h.setEventListeners(),m.setEventListeners(),_.setEventListeners(),u.rendererItems(),fetch("https://around-api.en.tripleten-services.com/v1/cards",{headers:{authorization:"9ef0ab52-82ee-47d1-a4ca-edc73135e4cc"}}).then((e=>e.json())).then((e=>{console.log(e)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FDeEJJLEVBQWFwRCxLQUFLZ0QsRUFDcEIsQ0FJQXhCLEVBQWtCdkQsaUJBQWlCLFNBQVMsS0FDMUNnRixFQUFpQmpELE9BQ2pCLE1BQU04RCxFQUFjWixFQUFTUyxjQUM3QlYsRUFBaUJoQyxlQUFlNkMsR0FDaENoQyxFQUF5QmhFLGlCQUFpQixJQUc1QzRELEVBQWlCekQsaUJBQWlCLFNBQVMsS0FDekMrRCxFQUFhaEMsTUFBTSxJQUVyQm9ELEVBQWE5QyxvQkFDYjBCLEVBQWExQixvQkFDYjJDLEVBQWlCM0Msb0JBQ2pCMkIsRUFBWVUsZ0JBRVpvQixNQUFNLHdEQUF5RCxDQUM3REMsUUFBUyxDQUNQQyxjQUFlLDBDQUdoQkMsTUFBTUMsR0FBUUEsRUFBSUMsU0FDbEJGLE1BQU1HLElBQ0xDLFFBQVFDLElBQUlGLEVBQU8sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Nb2RhbC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Nb2RhbFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm07XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWwpID0+IHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbCkgPT4ge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9O1xuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbCkgPT4ge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgfTtcblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gICAgfVxuICB9O1xuXG4gIF9lbmFibGVCdXR0b24gPSAoKSA9PiB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH07XG5cbiAgZGlzYWJsZUJ1dHRvbiA9ICgpID0+IHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsKSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWwudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH07XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfSk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRFbCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICByZXNldEZvcm0oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMubGluayA9IGxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl90cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUljb24oKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZHNfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9nZXRWaWV3KCkge1xuICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5saXN0XCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VmlldygpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl90cmFzaEJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX3RyYXNoLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fdGl0bGVcIik7XG5cbiAgICB0aGlzLl9jYXJkVGl0bGVFbC50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgdGhpcy5saW5rKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgdGhpcy5uYW1lKTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IoeyBtb2RhbFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vZGFsU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UgPSAoKSA9PiB7XG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfTtcblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xuICAgIHRoaXMuX21vZGFsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi9Nb2RhbC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhGb3JtIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3RvcihcbiAgICBtb2RhbFNlbGVjdG9yLFxuICAgIGhhbmRsZUZvcm1TdWJtaXQsXG4gICAgeyBmb3JtU2VsZWN0b3IsIHN1Ym1pdEJ1dHRvblNlbGVjdG9yIH1cbiAgKSB7XG4gICAgc3VwZXIoeyBtb2RhbFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX21vZGFsRm9ybSA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xuICAgICAgLi4udGhpcy5fbW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Zvcm0taW5wdXRcIiksXG4gICAgXTtcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX21vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgdmFsdWVzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodmFsdWVzKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJpbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgTW9kYWxXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgTW9kYWxXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvTW9kYWxXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZyBcIixcbiAgfSxcbl07XG5cbi8qIEVMRU1FTlRTICovXG5cbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtYnV0dG9uXCIpO1xuY29uc3QgYWRkQ2FyZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1mb3JtXCIpO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKG9wdGlvbnMpO1xuXG5jb25zdCBmb3JtVmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybS1pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19mb3JtLWlucHV0X2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICBmb3JtVmFsaWRhdGlvbkNvbmZpZyxcbiAgcHJvZmlsZUVkaXRGb3JtXG4pO1xucHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgZm9ybVZhbGlkYXRpb25Db25maWcsXG4gIGFkZENhcmRGb3JtRWxlbWVudFxuKTtcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkQ2FyZE1vZGFsID0gbmV3IE1vZGFsV2l0aEZvcm0oXG4gIFwiI2FkZC1jYXJkLW1vZGFsXCIsXG4gIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0LFxuICBmb3JtVmFsaWRhdGlvbkNvbmZpZ1xuKTtcblxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IGNyZWF0ZUNhcmQsXG4gIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5cbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBuZXcgTW9kYWxXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0LFxuICBmb3JtVmFsaWRhdGlvbkNvbmZpZ1xuKTtcblxuY29uc3QgcHJldmlld01vZGFsID0gbmV3IE1vZGFsV2l0aEltYWdlKFwiI3ByZXZpZXdfX2ltYWdlLW1vZGFsXCIpO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgZGVzY3JpcHRpb25TZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbn0pO1xuXG4vKiBGVU5DVElPTlMgKi9cblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQodmFsdWVzKSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHZhbHVlcyk7XG4gIGVkaXRQcm9maWxlTW9kYWwuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljayk7XG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdCh2YWx1ZXMpIHtcbiAgYWRkQ2FyZE1vZGFsLmNsb3NlKCk7XG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oeyBuYW1lOiB2YWx1ZXMudGl0bGUsIGxpbms6IHZhbHVlcy51cmwgfSk7XG4gIGFkZENhcmRGb3JtRWxlbWVudC5yZXNldCgpO1xuICBhZGRDYXJkRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZERhdGEpIHtcbiAgcHJldmlld01vZGFsLm9wZW4oY2FyZERhdGEpO1xufVxuXG4vKiBFVkVOVCBMSVNURU5FUlMgKi9cblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdFByb2ZpbGVNb2RhbC5vcGVuKCk7XG4gIGNvbnN0IHByb2ZpbGVJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgZWRpdFByb2ZpbGVNb2RhbC5zZXRJbnB1dFZhbHVlcyhwcm9maWxlSW5mbyk7XG4gIHByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZENhcmRNb2RhbC5vcGVuKCk7XG59KTtcbnByZXZpZXdNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuYWRkQ2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5lZGl0UHJvZmlsZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jYXJkU2VjdGlvbi5yZW5kZXJlckl0ZW1zKCk7XG5cbmZldGNoKFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHNcIiwge1xuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI5ZWYwYWI1Mi04MmVlLTQ3ZDEtYTRjYS1lZGM3MzEzNWU0Y2NcIixcbiAgfSxcbn0pXG4gIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICB9KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7fVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIHNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVyZXJJdGVtcyA9ICgpID0+IHtcbiAgICB0aGlzLl9pdGVtcy5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5hZGRJdGVtKGl0ZW0pO1xuICAgIH0pO1xuICB9O1xuXG4gIGFkZEl0ZW0gPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihkYXRhKTtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfTtcbn1cbiIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi9Nb2RhbC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhJbWFnZSBleHRlbmRzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgbW9kYWxTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlVGl0bGUgPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19pbWFnZS10aXRsZVwiXG4gICAgKTtcbiAgfVxuXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIGxpbmspO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbmFtZSk7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJDdXJyZW50SW5mbyA9IHt9O1xuICAgIHVzZXJDdXJyZW50SW5mby50aXRsZSA9IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50O1xuICAgIHVzZXJDdXJyZW50SW5mby5kZXNjcmlwdGlvbiA9IHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudDtcbiAgICByZXR1cm4gdXNlckN1cnJlbnRJbmZvO1xuICB9XG5cbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS50aXRsZTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLmRlc2NyaXB0aW9uO1xuICB9XG59XG4iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiZm9ybSIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsInNvbWUiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JFYWNoIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJyZXNldEZvcm0iLCJyZXNldCIsIkNhcmQiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm5hbWUiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2xpa2VCdXR0b24iLCJfaGFuZGxlTGlrZUljb24iLCJfdHJhc2hCdXR0b24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkSW1hZ2VFbCIsInRvZ2dsZSIsIl9jYXJkRWxlbWVudCIsIl9nZXRWaWV3IiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2VuZXJhdGVDYXJkIiwiX2NhcmRUaXRsZUVsIiwic2V0QXR0cmlidXRlIiwiTW9kYWwiLCJtb2RhbFNlbGVjdG9yIiwiX21vZGFsRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsIl9jbG9zZUJ1dHRvbiIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJNb2RhbFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsImZvcm1TZWxlY3RvciIsInN1cGVyIiwiX21vZGFsRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2J1dHRvbiIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsImlucHV0IiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsInZhbHVlcyIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUVkaXRGb3JtIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsImFkZENhcmRGb3JtRWxlbWVudCIsImZvcm1WYWxpZGF0aW9uQ29uZmlnIiwib3B0aW9ucyIsInByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvciIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZE1vZGFsIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwidGl0bGUiLCJ1cmwiLCJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVyZXJJdGVtcyIsInJldmVyc2UiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkRGF0YSIsImVkaXRQcm9maWxlTW9kYWwiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwicHJldmlld01vZGFsIiwiX3ByZXZpZXdJbWFnZSIsIl9wcmV2aWV3SW1hZ2VUaXRsZSIsIm5hbWVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfZGVzY3JpcHRpb25FbGVtZW50IiwiZ2V0VXNlckluZm8iLCJ1c2VyQ3VycmVudEluZm8iLCJkZXNjcmlwdGlvbiIsInByb2ZpbGVJbmZvIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRoZW4iLCJyZXMiLCJqc29uIiwicmVzdWx0IiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=